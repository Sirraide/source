// R %srcc --ir --short-filenames --target x86_64-unknown-linux %s
program test;

proc sink (in int) {}
proc sink (in bool) {}

proc arith_checked (in int a, in int b) {
    sink(a + b);
    sink(a - b);
    sink(a * b);

    sink(a / b);
    sink(a % b);
    sink(a :/ b);
    sink(a :% b);

    sink(a << b);
    sink(a <<< b);
}

proc arith (in int a, in int b) {
    sink(a +~ b);
    sink(a -~ b);
    sink(a *~ b);

    sink(a >> b);
    sink(a >>> b);

    sink(a & b);
    sink(a | b);

    sink(a < b);
    sink(a <= b);
    sink(a > b);
    sink(a >= b);

    sink(a <: b);
    sink(a <=: b);
    sink(a :> b);
    sink(a :>= b);

    sink(a == b);
    sink(a != b);
}

// * @0 = "<<<\00"
// + @1 = "shift amount exceeds bit width\00"
// + @2 = "<<\00"
// + @3 = ":%\00"
// + @4 = ":/\00"
// + @5 = "%\00"
// + @6 = "division by zero\00"
// + @7 = "/\00"
// + @8 = "*\00"
// + @9 = "-\00"
// + @10 = "binary-ops.src\00"
// + @11 = "integer overflow\00"
// + @12 = "+\00"
// +
// + proc __src_main external ccc {
// + entry:
// +     ret
// + }
// +
// + proc _S4sinkFvxiE (i64 %0) private ccc {
// +     #0 = 8, align 8
// +
// + entry:
// +     store #0, i64 %0, align 8
// +     ret
// + }
// +
// + proc _S4sinkFvxbE (i1 %0 zeroext) private ccc {
// +     #0 = 1, align 1
// +
// + entry:
// +     %1 = sext i1 %0 to i8
// +     store #0, i8 %1, align 1
// +     ret
// + }
// +
// + proc _S13arith_checkedFvxixiE (i64 %0, i64 %1) private ccc {
// +     #0 = 8, align 8
// +     #1 = 8, align 8
// +     #2 = 80, align 8
// +
// + entry:
// +     store #0, i64 %0, align 8
// +     store #1, i64 %1, align 8
// +     %2 = load i64, #0, align 8
// +     %3 = load i64, #1, align 8
// +     %4 = sadd ov i64 %2, %3
// +     br %4:1 to bb1 else bb2
// +
// + bb1:
// +     store #2, ptr @10, align 8
// +     %5 = ptradd #2, 8
// +     store %5, i64 14, align 8
// +     %6 = ptradd #2, 16
// +     store %6, i64 8, align 8
// +     %7 = ptradd #2, 24
// +     store %7, i64 10, align 8
// +     %8 = ptradd #2, 32
// +     store %8, ptr @12, align 8
// +     %9 = ptradd %8, 8
// +     store %9, i64 1, align 8
// +     %10 = ptradd #2, 48
// +     store %10, ptr @11, align 8
// +     %11 = ptradd %10, 8
// +     store %11, i64 16, align 8
// +     %12 = ptradd #2, 64
// +     store %12, ptr nil, align 8
// +     %13 = ptradd %12, 8
// +     store %13, ptr nil, align 8
// +     abort at loc("binary-ops.src":8:10) arithmetic(ptr #2)
// +
// + bb2:
// +     call ccc void _S4sinkFvxiE(i64 %4:0)
// +     %14 = load i64, #0, align 8
// +     %15 = load i64, #1, align 8
// +     %16 = ssub ov i64 %14, %15
// +     br %16:1 to bb3 else bb4
// +
// + bb3:
// +     store #2, ptr @10, align 8
// +     %17 = ptradd #2, 8
// +     store %17, i64 14, align 8
// +     %18 = ptradd #2, 16
// +     store %18, i64 9, align 8
// +     %19 = ptradd #2, 24
// +     store %19, i64 10, align 8
// +     %20 = ptradd #2, 32
// +     store %20, ptr @9, align 8
// +     %21 = ptradd %20, 8
// +     store %21, i64 1, align 8
// +     %22 = ptradd #2, 48
// +     store %22, ptr @11, align 8
// +     %23 = ptradd %22, 8
// +     store %23, i64 16, align 8
// +     %24 = ptradd #2, 64
// +     store %24, ptr nil, align 8
// +     %25 = ptradd %24, 8
// +     store %25, ptr nil, align 8
// +     abort at loc("binary-ops.src":9:10) arithmetic(ptr #2)
// +
// + bb4:
// +     call ccc void _S4sinkFvxiE(i64 %16:0)
// +     %26 = load i64, #0, align 8
// +     %27 = load i64, #1, align 8
// +     %28 = smul ov i64 %26, %27
// +     br %28:1 to bb5 else bb6
// +
// + bb5:
// +     store #2, ptr @10, align 8
// +     %29 = ptradd #2, 8
// +     store %29, i64 14, align 8
// +     %30 = ptradd #2, 16
// +     store %30, i64 10, align 8
// +     %31 = ptradd #2, 24
// +     store %31, i64 10, align 8
// +     %32 = ptradd #2, 32
// +     store %32, ptr @8, align 8
// +     %33 = ptradd %32, 8
// +     store %33, i64 1, align 8
// +     %34 = ptradd #2, 48
// +     store %34, ptr @11, align 8
// +     %35 = ptradd %34, 8
// +     store %35, i64 16, align 8
// +     %36 = ptradd #2, 64
// +     store %36, ptr nil, align 8
// +     %37 = ptradd %36, 8
// +     store %37, ptr nil, align 8
// +     abort at loc("binary-ops.src":10:10) arithmetic(ptr #2)
// +
// + bb6:
// +     call ccc void _S4sinkFvxiE(i64 %28:0)
// +     %38 = load i64, #0, align 8
// +     %39 = load i64, #1, align 8
// +     %40 = icmp eq i64 %39, 0
// +     br %40 to bb7 else bb8
// +
// + bb7:
// +     store #2, ptr @10, align 8
// +     %41 = ptradd #2, 8
// +     store %41, i64 14, align 8
// +     %42 = ptradd #2, 16
// +     store %42, i64 12, align 8
// +     %43 = ptradd #2, 24
// +     store %43, i64 10, align 8
// +     %44 = ptradd #2, 32
// +     store %44, ptr @7, align 8
// +     %45 = ptradd %44, 8
// +     store %45, i64 1, align 8
// +     %46 = ptradd #2, 48
// +     store %46, ptr @6, align 8
// +     %47 = ptradd %46, 8
// +     store %47, i64 16, align 8
// +     %48 = ptradd #2, 64
// +     store %48, ptr nil, align 8
// +     %49 = ptradd %48, 8
// +     store %49, ptr nil, align 8
// +     abort at loc("binary-ops.src":12:10) arithmetic(ptr #2)
// +
// + bb8:
// +     %50 = icmp eq i64 %38, -9223372036854775808
// +     %51 = icmp eq i64 %39, -1
// +     %52 = and i1 %50, %51
// +     br %52 to bb9 else bb10
// +
// + bb9:
// +     store #2, ptr @10, align 8
// +     %53 = ptradd #2, 8
// +     store %53, i64 14, align 8
// +     %54 = ptradd #2, 16
// +     store %54, i64 12, align 8
// +     %55 = ptradd #2, 24
// +     store %55, i64 10, align 8
// +     %56 = ptradd #2, 32
// +     store %56, ptr @7, align 8
// +     %57 = ptradd %56, 8
// +     store %57, i64 1, align 8
// +     %58 = ptradd #2, 48
// +     store %58, ptr @11, align 8
// +     %59 = ptradd %58, 8
// +     store %59, i64 16, align 8
// +     %60 = ptradd #2, 64
// +     store %60, ptr nil, align 8
// +     %61 = ptradd %60, 8
// +     store %61, ptr nil, align 8
// +     abort at loc("binary-ops.src":12:10) arithmetic(ptr #2)
// +
// + bb10:
// +     %62 = sdiv i64 %38, %39
// +     call ccc void _S4sinkFvxiE(i64 %62)
// +     %63 = load i64, #0, align 8
// +     %64 = load i64, #1, align 8
// +     %65 = icmp eq i64 %64, 0
// +     br %65 to bb11 else bb12
// +
// + bb11:
// +     store #2, ptr @10, align 8
// +     %66 = ptradd #2, 8
// +     store %66, i64 14, align 8
// +     %67 = ptradd #2, 16
// +     store %67, i64 13, align 8
// +     %68 = ptradd #2, 24
// +     store %68, i64 10, align 8
// +     %69 = ptradd #2, 32
// +     store %69, ptr @5, align 8
// +     %70 = ptradd %69, 8
// +     store %70, i64 1, align 8
// +     %71 = ptradd #2, 48
// +     store %71, ptr @6, align 8
// +     %72 = ptradd %71, 8
// +     store %72, i64 16, align 8
// +     %73 = ptradd #2, 64
// +     store %73, ptr nil, align 8
// +     %74 = ptradd %73, 8
// +     store %74, ptr nil, align 8
// +     abort at loc("binary-ops.src":13:10) arithmetic(ptr #2)
// +
// + bb12:
// +     %75 = icmp eq i64 %63, -9223372036854775808
// +     %76 = icmp eq i64 %64, -1
// +     %77 = and i1 %75, %76
// +     br %77 to bb13 else bb14
// +
// + bb13:
// +     store #2, ptr @10, align 8
// +     %78 = ptradd #2, 8
// +     store %78, i64 14, align 8
// +     %79 = ptradd #2, 16
// +     store %79, i64 13, align 8
// +     %80 = ptradd #2, 24
// +     store %80, i64 10, align 8
// +     %81 = ptradd #2, 32
// +     store %81, ptr @5, align 8
// +     %82 = ptradd %81, 8
// +     store %82, i64 1, align 8
// +     %83 = ptradd #2, 48
// +     store %83, ptr @11, align 8
// +     %84 = ptradd %83, 8
// +     store %84, i64 16, align 8
// +     %85 = ptradd #2, 64
// +     store %85, ptr nil, align 8
// +     %86 = ptradd %85, 8
// +     store %86, ptr nil, align 8
// +     abort at loc("binary-ops.src":13:10) arithmetic(ptr #2)
// +
// + bb14:
// +     %87 = srem i64 %63, %64
// +     call ccc void _S4sinkFvxiE(i64 %87)
// +     %88 = load i64, #0, align 8
// +     %89 = load i64, #1, align 8
// +     %90 = icmp eq i64 %89, 0
// +     br %90 to bb15 else bb16
// +
// + bb15:
// +     store #2, ptr @10, align 8
// +     %91 = ptradd #2, 8
// +     store %91, i64 14, align 8
// +     %92 = ptradd #2, 16
// +     store %92, i64 14, align 8
// +     %93 = ptradd #2, 24
// +     store %93, i64 10, align 8
// +     %94 = ptradd #2, 32
// +     store %94, ptr @4, align 8
// +     %95 = ptradd %94, 8
// +     store %95, i64 2, align 8
// +     %96 = ptradd #2, 48
// +     store %96, ptr @6, align 8
// +     %97 = ptradd %96, 8
// +     store %97, i64 16, align 8
// +     %98 = ptradd #2, 64
// +     store %98, ptr nil, align 8
// +     %99 = ptradd %98, 8
// +     store %99, ptr nil, align 8
// +     abort at loc("binary-ops.src":14:10) arithmetic(ptr #2)
// +
// + bb16:
// +     %100 = udiv i64 %88, %89
// +     call ccc void _S4sinkFvxiE(i64 %100)
// +     %101 = load i64, #0, align 8
// +     %102 = load i64, #1, align 8
// +     %103 = icmp eq i64 %102, 0
// +     br %103 to bb17 else bb18
// +
// + bb17:
// +     store #2, ptr @10, align 8
// +     %104 = ptradd #2, 8
// +     store %104, i64 14, align 8
// +     %105 = ptradd #2, 16
// +     store %105, i64 15, align 8
// +     %106 = ptradd #2, 24
// +     store %106, i64 10, align 8
// +     %107 = ptradd #2, 32
// +     store %107, ptr @3, align 8
// +     %108 = ptradd %107, 8
// +     store %108, i64 2, align 8
// +     %109 = ptradd #2, 48
// +     store %109, ptr @6, align 8
// +     %110 = ptradd %109, 8
// +     store %110, i64 16, align 8
// +     %111 = ptradd #2, 64
// +     store %111, ptr nil, align 8
// +     %112 = ptradd %111, 8
// +     store %112, ptr nil, align 8
// +     abort at loc("binary-ops.src":15:10) arithmetic(ptr #2)
// +
// + bb18:
// +     %113 = urem i64 %101, %102
// +     call ccc void _S4sinkFvxiE(i64 %113)
// +     %114 = load i64, #0, align 8
// +     %115 = load i64, #1, align 8
// +     %116 = icmp uge i64 %115, 64
// +     br %116 to bb19 else bb20
// +
// + bb19:
// +     store #2, ptr @10, align 8
// +     %117 = ptradd #2, 8
// +     store %117, i64 14, align 8
// +     %118 = ptradd #2, 16
// +     store %118, i64 17, align 8
// +     %119 = ptradd #2, 24
// +     store %119, i64 10, align 8
// +     %120 = ptradd #2, 32
// +     store %120, ptr @2, align 8
// +     %121 = ptradd %120, 8
// +     store %121, i64 2, align 8
// +     %122 = ptradd #2, 48
// +     store %122, ptr @1, align 8
// +     %123 = ptradd %122, 8
// +     store %123, i64 30, align 8
// +     %124 = ptradd #2, 64
// +     store %124, ptr nil, align 8
// +     %125 = ptradd %124, 8
// +     store %125, ptr nil, align 8
// +     abort at loc("binary-ops.src":17:10) arithmetic(ptr #2)
// +
// + bb20:
// +     %126 = shl i64 %114, %115
// +     %127 = ashr i64 %114, 63
// +     %128 = ashr i64 %126, 63
// +     %129 = icmp ne i64 %127, %128
// +     br %129 to bb21 else bb22
// +
// + bb21:
// +     store #2, ptr @10, align 8
// +     %130 = ptradd #2, 8
// +     store %130, i64 14, align 8
// +     %131 = ptradd #2, 16
// +     store %131, i64 17, align 8
// +     %132 = ptradd #2, 24
// +     store %132, i64 10, align 8
// +     %133 = ptradd #2, 32
// +     store %133, ptr @2, align 8
// +     %134 = ptradd %133, 8
// +     store %134, i64 2, align 8
// +     %135 = ptradd #2, 48
// +     store %135, ptr @11, align 8
// +     %136 = ptradd %135, 8
// +     store %136, i64 16, align 8
// +     %137 = ptradd #2, 64
// +     store %137, ptr nil, align 8
// +     %138 = ptradd %137, 8
// +     store %138, ptr nil, align 8
// +     abort at loc("binary-ops.src":17:10) arithmetic(ptr #2)
// +
// + bb22:
// +     call ccc void _S4sinkFvxiE(i64 %126)
// +     %139 = load i64, #0, align 8
// +     %140 = load i64, #1, align 8
// +     %141 = icmp uge i64 %140, 64
// +     br %141 to bb23 else bb24
// +
// + bb23:
// +     store #2, ptr @10, align 8
// +     %142 = ptradd #2, 8
// +     store %142, i64 14, align 8
// +     %143 = ptradd #2, 16
// +     store %143, i64 18, align 8
// +     %144 = ptradd #2, 24
// +     store %144, i64 10, align 8
// +     %145 = ptradd #2, 32
// +     store %145, ptr @0, align 8
// +     %146 = ptradd %145, 8
// +     store %146, i64 3, align 8
// +     %147 = ptradd #2, 48
// +     store %147, ptr @1, align 8
// +     %148 = ptradd %147, 8
// +     store %148, i64 30, align 8
// +     %149 = ptradd #2, 64
// +     store %149, ptr nil, align 8
// +     %150 = ptradd %149, 8
// +     store %150, ptr nil, align 8
// +     abort at loc("binary-ops.src":18:10) arithmetic(ptr #2)
// +
// + bb24:
// +     %151 = shl i64 %139, %140
// +     call ccc void _S4sinkFvxiE(i64 %151)
// +     ret
// + }
// +
// + proc _S5arithFvxixiE (i64 %0, i64 %1) private ccc {
// +     #0 = 8, align 8
// +     #1 = 8, align 8
// +
// + entry:
// +     store #0, i64 %0, align 8
// +     store #1, i64 %1, align 8
// +     %2 = load i64, #0, align 8
// +     %3 = load i64, #1, align 8
// +     %4 = add i64 %2, %3
// +     call ccc void _S4sinkFvxiE(i64 %4)
// +     %5 = load i64, #0, align 8
// +     %6 = load i64, #1, align 8
// +     %7 = sub i64 %5, %6
// +     call ccc void _S4sinkFvxiE(i64 %7)
// +     %8 = load i64, #0, align 8
// +     %9 = load i64, #1, align 8
// +     %10 = mul i64 %8, %9
// +     call ccc void _S4sinkFvxiE(i64 %10)
// +     %11 = load i64, #0, align 8
// +     %12 = load i64, #1, align 8
// +     %13 = ashr i64 %11, %12
// +     call ccc void _S4sinkFvxiE(i64 %13)
// +     %14 = load i64, #0, align 8
// +     %15 = load i64, #1, align 8
// +     %16 = lshr i64 %14, %15
// +     call ccc void _S4sinkFvxiE(i64 %16)
// +     %17 = load i64, #0, align 8
// +     %18 = load i64, #1, align 8
// +     %19 = and i64 %17, %18
// +     call ccc void _S4sinkFvxiE(i64 %19)
// +     %20 = load i64, #0, align 8
// +     %21 = load i64, #1, align 8
// +     %22 = or i64 %20, %21
// +     call ccc void _S4sinkFvxiE(i64 %22)
// +     %23 = load i64, #0, align 8
// +     %24 = load i64, #1, align 8
// +     %25 = icmp slt i64 %23, %24
// +     call ccc void _S4sinkFvxbE(i1 %25 zeroext)
// +     %26 = load i64, #0, align 8
// +     %27 = load i64, #1, align 8
// +     %28 = icmp sle i64 %26, %27
// +     call ccc void _S4sinkFvxbE(i1 %28 zeroext)
// +     %29 = load i64, #0, align 8
// +     %30 = load i64, #1, align 8
// +     %31 = icmp sgt i64 %29, %30
// +     call ccc void _S4sinkFvxbE(i1 %31 zeroext)
// +     %32 = load i64, #0, align 8
// +     %33 = load i64, #1, align 8
// +     %34 = icmp sge i64 %32, %33
// +     call ccc void _S4sinkFvxbE(i1 %34 zeroext)
// +     %35 = load i64, #0, align 8
// +     %36 = load i64, #1, align 8
// +     %37 = icmp ult i64 %35, %36
// +     call ccc void _S4sinkFvxbE(i1 %37 zeroext)
// +     %38 = load i64, #0, align 8
// +     %39 = load i64, #1, align 8
// +     %40 = icmp ule i64 %38, %39
// +     call ccc void _S4sinkFvxbE(i1 %40 zeroext)
// +     %41 = load i64, #0, align 8
// +     %42 = load i64, #1, align 8
// +     %43 = icmp ugt i64 %41, %42
// +     call ccc void _S4sinkFvxbE(i1 %43 zeroext)
// +     %44 = load i64, #0, align 8
// +     %45 = load i64, #1, align 8
// +     %46 = icmp uge i64 %44, %45
// +     call ccc void _S4sinkFvxbE(i1 %46 zeroext)
// +     %47 = load i64, #0, align 8
// +     %48 = load i64, #1, align 8
// +     %49 = icmp eq i64 %47, %48
// +     call ccc void _S4sinkFvxbE(i1 %49 zeroext)
// +     %50 = load i64, #0, align 8
// +     %51 = load i64, #1, align 8
// +     %52 = icmp ne i64 %50, %51
// +     call ccc void _S4sinkFvxbE(i1 %52 zeroext)
// +     ret
// + }
