// V %srcc --sema --verify %s
program test;

s a;

struct t { s a; }

// FIXME: This should work because we should add the procedure to the scope
// and only come back to parse the type later once weâ€™ve picked up 's'.
proc p1 (s a) {} // expected-error: Unknown symbol 's'

// FIXME: Likewise
proc p2 -> s {} // expected-error: Unknown symbol 's'

proc q1 { s x; }
proc q2 = s();

p1(42);
var m = p2();
s();

// Once we get here, the struct is finally complete.
struct s {}

// These are all fine now.
s q;
p1(42);
var n = p2();

// FIXME: returning structs is currently not implemented
// proc = s();
